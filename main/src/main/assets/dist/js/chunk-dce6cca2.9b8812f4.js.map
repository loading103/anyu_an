{"version":3,"sources":["webpack:///./src/views/follow/follow.vue?a1b4","webpack:///./src/views/follow/follow.vue?92b2","webpack:///./src/views/follow/follow.vue","webpack:///src/views/follow/follow.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","_v","_s","play_group_info","name","_f","openTime2","number","leftTime","_l","betForm","item","index","key","content","on","$event","deleteZhu","zhushu","beishu","perMoney","class","active","setbeishu","sscBetList","length","totalMoney","UserBaseInfo","balance","betForm1","staticRenderFns","component"],"mappings":"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","file":"js/chunk-dce6cca2.9b8812f4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"fixed\"},[_c('div',{staticClass:\"follow\"},[_vm._m(0),_c('div',{staticClass:\"cut-down\"},[_vm._v(_vm._s(_vm.play_group_info.name)+\" 距离\"),_c('i',[_vm._v(_vm._s(_vm._f(\"lotteryNumber\")(_vm.openTime2.number,4)))]),_vm._v(\"期 \"),_c('span',[_vm._v(\"封盘: \"),_c('i',[_vm._v(_vm._s(_vm._f(\"CountDown\")(_vm.leftTime)))])])]),_c('div',{staticClass:\"list\"},[_c('ul',_vm._l((_vm.betForm.sscBetList),function(item,index){return _c('li',{key:index},[_c('h2',[_c('b',[_vm._v(_vm._s(item.content))]),_c('span',{staticClass:\"del\",on:{\"click\":function($event){return _vm.deleteZhu(index)}}})]),_c('div',{staticClass:\"info\"},[_c('div',{staticClass:\"fl\"},[_vm._v(\"期号：\"+_vm._s(item.number))]),_c('div',{staticClass:\"fr\"},[_c('span',[_c('i',[_vm._v(_vm._s(item.zhushu))]),_vm._v(\"注\"),_c('i',[_vm._v(_vm._s(item.beishu))]),_vm._v(\"倍\")]),_c('b',[_vm._v(_vm._s(item.perMoney)+\".00 x \"+_vm._s(_vm.beishu))])])])])}),0)]),_c('div',{staticClass:\"beishu-select\"},[_c('span',{class:{active: _vm.beishu==1},on:{\"click\":function($event){return _vm.setbeishu(1)}}},[_vm._v(\"1倍\")]),_c('span',{class:{active: _vm.beishu==2},on:{\"click\":function($event){return _vm.setbeishu(2)}}},[_vm._v(\"2倍\")]),_c('span',{class:{active: _vm.beishu==5},on:{\"click\":function($event){return _vm.setbeishu(5)}}},[_vm._v(\"5倍\")]),_c('span',{class:{active: _vm.beishu==10},on:{\"click\":function($event){return _vm.setbeishu(10)}}},[_vm._v(\"10倍\")]),_c('span',{class:{active: _vm.beishu==20},on:{\"click\":function($event){return _vm.setbeishu(20)}}},[_vm._v(\"20倍\")])]),_c('div',{staticClass:\"confirom\"},[_c('div',{staticClass:\"fl\"},[_c('h3',[_c('i',[_vm._v(_vm._s(_vm.betForm.sscBetList.length))]),_vm._v(\"注 \"),_c('span',[_vm._v(\"共\"),_c('i',[_vm._v(_vm._s(_vm.totalMoney))]),_vm._v(\"元\")])]),_c('p',[_c('i',[_vm._v(_vm._s(_vm.UserBaseInfo.balance || '0.00'))]),_vm._v(\"元\")])]),_c('div',{staticClass:\"fr\"},[_c('button',{on:{\"click\":_vm.betForm1}},[_vm._v(\"确认投注\")])])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"title\"},[_c('h2',[_vm._v(\"确认投注\")])])}]\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./follow.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./follow.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./follow.vue?vue&type=template&id=ff089574&\"\nimport script from \"./follow.vue?vue&type=script&lang=js&\"\nexport * from \"./follow.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <div class=\"container\">\r\n        <div class=\"fixed\">\r\n            <div class=\"follow\">\r\n                <div class=\"title\">\r\n                    <h2>确认投注</h2>\r\n                </div>\r\n                <div class=\"cut-down\">{{play_group_info.name}} 距离<i>{{openTime2.number | lotteryNumber(4)}}</i>期 <span>封盘: <i>{{leftTime | CountDown}}</i></span></div>\r\n                <div class=\"list\">\r\n                    <ul>\r\n                        <li v-for=\"(item, index) in betForm.sscBetList\" :key=\"index\">\r\n                            <h2><b>{{item.content}}</b><span @click=\"deleteZhu(index)\" class=\"del\"></span></h2>\r\n                            <div class=\"info\">\r\n                                <div class=\"fl\">期号：{{item.number}}</div>\r\n                                <div class=\"fr\">\r\n                                    <span><i>{{item.zhushu}}</i>注<i>{{item.beishu}}</i>倍</span>\r\n                                    <b>{{item.perMoney}}.00 x {{beishu}}</b>\r\n                                </div>\r\n                            </div>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n                <div class=\"beishu-select\">\r\n                    <span @click=\"setbeishu(1)\" :class=\"{active: beishu==1}\">1倍</span>\r\n                    <span @click=\"setbeishu(2)\" :class=\"{active: beishu==2}\">2倍</span>\r\n                    <span @click=\"setbeishu(5)\" :class=\"{active: beishu==5}\">5倍</span>\r\n                    <span @click=\"setbeishu(10)\" :class=\"{active: beishu==10}\">10倍</span>\r\n                    <span @click=\"setbeishu(20)\" :class=\"{active: beishu==20}\">20倍</span>\r\n                </div>\r\n                <div class=\"confirom\">\r\n                    <div class=\"fl\">\r\n                        <h3><i>{{betForm.sscBetList.length}}</i>注 <span>共<i>{{totalMoney}}</i>元</span></h3>\r\n                        <p><i>{{UserBaseInfo.balance || '0.00'}}</i>元</p>\r\n                    </div>\r\n                    <div class=\"fr\">\r\n                        <button @click=\"betForm1\">确认投注</button>\r\n                   </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import { mapState } from \"vuex\";\r\n    import {\r\n        GAME_GET_SSC_PLAY_GROUP,\r\n        GAME_GET_SSC_OPEN_TIME2,\r\n        GAME_GET_BET2,\r\n        GAME_GET_USER_BASE_INFO\r\n    } from \"@/tool/common/constants.js\";\r\n    export default {\r\n        data(){\r\n            return {\r\n                betForm:{\r\n                    sscBetList:[]\r\n                },\r\n                config: {\r\n                    uid: '',\r\n                    token: '',\r\n                },\r\n                robot:'',\r\n                beishu: 1,\r\n                playGroupId: false,\r\n                leftTime: 0,\r\n            }\r\n        },\r\n        created(){\r\n            var params = this.$route.query\r\n            const {uid, token, robot} = params\r\n            this.config.uid = uid\r\n            this.config.token = token\r\n            this.robot = robot\r\n            this.betForm = this.decode(params.data)\r\n            console.log(this.betForm);\r\n            this.playGroupId = this.betForm.sscBetList[0].playGroupId\r\n            this.beishu = this.betForm.lianxuBeishu\r\n            this.getUserBaseInfo()\r\n            this.getSscPlayGroup()\r\n            this.getSscOpenTime2()\r\n        },\r\n        computed: {\r\n            ...mapState('Game', {\r\n                play_group_info: state => state[GAME_GET_SSC_PLAY_GROUP],\r\n                openTime2: state => state[GAME_GET_SSC_OPEN_TIME2],\r\n                UserBaseInfo: state => state[GAME_GET_USER_BASE_INFO],\r\n                sscBetListData: state => state.sscBetList\r\n            }),\r\n            totalMoney(){\r\n                var money = 0\r\n                this.betForm.sscBetList.forEach(item=>{\r\n                    money += item.perMoney * this.beishu\r\n                })\r\n                return money\r\n            }\r\n        },\r\n        mounted(){\r\n            this.mui(\".follow .list\").scroll({\r\n                deceleration:0.0005,\r\n                indicators: false,\r\n            })\r\n        },\r\n        methods: {\r\n            setbeishu(beishu){\r\n                this.beishu = beishu\r\n            },\r\n            deleteZhu(index){\r\n                if(this.betForm.sscBetList.length > 1){\r\n                    this.betForm.sscBetList.splice(index, 1)\r\n                }else{\r\n                    this.$toast('至少保留一条投注');\r\n                }\r\n            },\r\n            decode(base64){\r\n                // 对base64转编码\r\n                var decode = atob(base64);\r\n                // 编码转字符串\r\n                var str = decodeURI(decode);\r\n                return JSON.parse(str);\r\n            },\r\n            // 投注\r\n            betForm1(){\r\n\r\n                this.$toast.loading({\r\n                    duration: 0,\r\n                    forbidClick: true,\r\n                    message: '投注中...',\r\n                })\r\n\r\n                const sscBetList = this.betForm.sscBetList\r\n\r\n                var totalMoney = 0;\r\n\r\n                // 统计总金额\r\n                sscBetList.forEach(item=>{\r\n                    totalMoney += parseFloat(item.totalMoney) * this.beishu\r\n                })\r\n                \r\n                var betForm = {\r\n                    totalZhushu: sscBetList.length,\r\n                    totalMoney,\r\n                    lianxuBeishu: this.beishu + '',\r\n                    lianxuQishu:'1',\r\n                    sscBetList,\r\n                }\r\n\r\n                var data = {\r\n                    betForm: JSON.stringify(betForm),\r\n                    ...this.config\r\n                }\r\n\r\n                console.log(data, totalMoney);\r\n                \r\n                this.$store.dispatch(`Game/${GAME_GET_BET2}`, data)\r\n                .then(res=>{\r\n                    this.$toast.clear()\r\n                    if(res.result==1){\r\n                        this.sucCall(betForm, totalMoney)\r\n                        this.getUserBaseInfo()\r\n                        this.$toast(res.description);\r\n                    }else{\r\n                        this.$toast(res.description);\r\n                    }\r\n                })\r\n            },\r\n            encode(str){\r\n                // 对字符串进行编码\r\n                var encode = encodeURI(str);\r\n                // 对编码的字符串转化base64\r\n                var base64 = btoa(encode);\r\n                return base64;\r\n            },\r\n            sucCall(betForm, totalMoney) {\r\n                var betFormBase64 = this.encode(JSON.stringify(betForm))\r\n\r\n                var json = `{\"goodsName\":\"${this.play_group_info.name}跟投了${totalMoney}元\",\"goodsUrl\":\"/follow?data=${betFormBase64}\",\"outhParam\":\"abc=123&bde=465\",\r\n                \"goodsId\":\"${this.playGroupId}\",\"activeId\":\"${this.openTime2.number}\"}`;\r\n\r\n                if(this.env.app){\r\n                    if(this.env.isAndroid){\r\n                        window.android.showMsgButton(json);\r\n                    }\r\n                    if(this.env.isIOS){\r\n                        window.webkit.messageHandlers.showMsgButton.postMessage(json);\r\n                    }\r\n                }else{\r\n                    console.log('非APP');\r\n                }\r\n            },\r\n            cutDown(){\r\n                clearInterval(time1)\r\n                this.leftTime= this.openTime2.leftTime\r\n                var time1 = setInterval(() => {\r\n                    this.leftTime = this.leftTime - 1\r\n                    if(this.leftTime <= 0){\r\n                        clearInterval(time1)\r\n                        setTimeout(() => {\r\n                            this.getSscOpenTime2()\r\n                        }, 3000);\r\n                    }\r\n                }, 1000);\r\n            },\r\n            // 个人信息\r\n            getUserBaseInfo(){\r\n                const {uid, token} = this.config\r\n                var data = {\r\n                    uid,\r\n                    token,\r\n                }\r\n                this.$store.dispatch(`Game/${GAME_GET_USER_BASE_INFO}`, data)\r\n            },\r\n            // 彩种详情\r\n            getSscPlayGroup(){\r\n                var data = {\r\n                    playGroupId: this.playGroupId,\r\n                }\r\n                this.$store.dispatch(`Game/${GAME_GET_SSC_PLAY_GROUP}`, data)\r\n            },\r\n            // 开奖时间\r\n            getSscOpenTime2(){\r\n                var data = {\r\n                    playGroupId: this.playGroupId,\r\n                }\r\n                this.$store.dispatch(`Game/${GAME_GET_SSC_OPEN_TIME2}`, data)\r\n                .then(res=>{\r\n                    if(res.leftTime > 0){\r\n                        console.log('开始倒计时');\r\n                        this.cutDown()\r\n                        if(this.robot=='true'){\r\n                            console.log('机器投注');\r\n                        }else{\r\n                            this.betForm.sscBetList.forEach(item=>{\r\n                                item.number = res.number\r\n                            })\r\n                        }\r\n                    }else{\r\n                        console.log('正在封盘');\r\n                    }\r\n                })\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"],"sourceRoot":""}